# This file was automatically generated on Fri 05 Jul 2024 17:42:33 BST from
# source: /dls_sw/work/R3.14.12.7/support/GIGE-BUILDER/etc/makeIocs/TEST-DI-IOC-01.xml
# 
# *** Please do not edit this file: edit the source file instead. ***
# 
cd "$(INSTALL)"

epicsEnvSet "EPICS_CA_MAX_ARRAY_BYTES", '10000000'
epicsEnvSet "EPICS_TS_MIN_WEST", '0'


# Loading libraries
# -----------------

# Device initialisation
# ---------------------

cd "$(INSTALL)"

dbLoadDatabase "dbd/TEST-DI-IOC-01.dbd"
TEST_DI_IOC_01_registerRecordDeviceDriver(pdbbase)

# simDetectorConfig(portName, maxSizeX, maxSizeY, dataType, maxBuffers, maxMemory)
simDetectorConfig("ADSIM.CAM", 1280, 960, 1, 50, 0)

# NDProcessConfigure(portName, queueSize, blockingCallbacks, NDArrayPort, NDArrayAddr)
NDProcessConfigure("ADSIM.PROC", 2, 0, "ADSIM.CAM", 0)

# NDROIConfigure(portName, queueSize, blockingCallbacks, NDArrayPort, NDArrayAddr, maxBuffers, maxMemory, priority, stackSize, maxThreads)
NDROIConfigure("ADSIM.ROI", 2, 0, "ADSIM.CAM", 0, 0, 0, 0, 0, 1)

# NDTransformConfigure(portName, queueSize, blockingCallbacks, NDArrayPort, NDArrayAddr, maxBuffers, maxMemory, priority, stackSize, maxThreads)
NDTransformConfigure("ADSIM.TR", 2, 0, "ADSIM.CAM", 0, 0, 0, 0, 0, 1)

# Final ioc initialisation
# ------------------------
cd "$(INSTALL)"
dbLoadRecords 'db/TEST-DI-IOC-01_expanded.db'
iocInit
